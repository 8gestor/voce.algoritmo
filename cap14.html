<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Epílogo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- FATOR X v4.5: KERNEL PANIC THEME --- */
        :root {
            --c-bg: #000000;
            --c-text: #f8fafc;
            --c-dim: #94a3b8;
            --c-panic: #ff0040; /* Vermelho Erro */
            --c-panic-dim: rgba(255, 0, 64, 0.1);
            --c-panic-glow: 0 0 25px rgba(255, 0, 64, 0.4);
            --c-truth: #ffffff;
            --c-code: #00f0ff; /* Ciano Matrix */
            --font-ui: 'Inter', sans-serif;
            --font-tech: 'JetBrains Mono', monospace;
            --base-size: 19px;
            --border-tech: 1px solid rgba(255, 255, 255, 0.15);
            --scroll-track: #000000; --scroll-thumb: #333333; --scroll-hover: #ff0040;
        }

        body.light-mode {
            --c-bg: #f0f0f0; --c-text: #111111; --c-dim: #555555;
            --c-panic: #cc0000; --c-panic-dim: rgba(204, 0, 0, 0.08); --c-panic-glow: 0 0 10px rgba(204, 0, 0, 0.2);
            --c-truth: #000000; --c-code: #0055cc;
            --border-tech: 1px solid rgba(0, 0, 0, 0.1);
            --scroll-track: #f0f0f0; --scroll-thumb: #999; --scroll-hover: #cc0000;
        }

        body.sepia-mode {
            --c-bg: #F4ECD8; --c-text: #433422; --c-dim: #5c4b37;
            --c-panic: #9f1239; --c-panic-dim: rgba(159, 18, 57, 0.08); --c-panic-glow: none;
            --c-truth: #27272a; --c-code: #0369a1;
            --border-tech: 1px solid rgba(67, 52, 34, 0.15);
            --scroll-track: #F4ECD8; --scroll-thumb: #D0C5A8; --scroll-hover: #9f1239;
        }

        html { scroll-behavior: smooth; scrollbar-width: thin; scrollbar-color: var(--scroll-thumb) var(--scroll-track); }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--scroll-track); }
        ::-webkit-scrollbar-thumb { background: var(--scroll-thumb); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--scroll-hover); }

        body {
            background-color: var(--c-bg); color: var(--c-text);
            font-family: var(--font-ui); font-size: var(--base-size);
            line-height: 1.7; padding: 40px 20px 150px 20px;
            transition: all 0.5s ease; max-width: 760px; margin: 0 auto;
            background-image: radial-gradient(rgba(255, 0, 64, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        h1, h2, h3 { text-transform: uppercase !important; letter-spacing: -0.02em; }

        h1 {
            font-family: var(--font-tech); color: var(--c-text);
            font-size: 3rem; margin-bottom: 60px; line-height: 1;
            letter-spacing: -2px; font-weight: 800;
            text-shadow: 0 0 10px rgba(255,255,255,0.1);
        }
        h1::after { content: '_'; animation: blink 1s infinite; color: var(--c-panic); }
        
        h2 {
            font-family: var(--font-tech); color: var(--c-code);
            font-size: 1.5rem; margin: 4em 0 1.5em; 
            border-left: 4px solid var(--c-code); padding-left: 20px;
        }

        p { margin-bottom: 2.2em; text-align: justify; hyphens: auto; }
        strong { color: var(--c-truth); font-weight: 700; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
        body.sepia-mode strong { text-shadow: none; }

        .system-alert {
            font-family: var(--font-tech); font-size: 0.75rem; color: var(--c-panic);
            border: 1px solid var(--c-panic); padding: 8px 12px; display: inline-block;
            margin-bottom: 30px; text-transform: uppercase; letter-spacing: 2px;
            animation: pulse 2s infinite; box-shadow: var(--c-panic-glow);
        }

        .terminal-box {
            background: #050505; border: 1px solid var(--c-panic); padding: 30px;
            font-family: var(--font-tech); font-size: 0.8rem; color: var(--c-panic);
            margin: 3em 0; box-shadow: var(--c-panic-glow); position: relative; overflow: hidden;
        }
        .terminal-box::before {
            content: "SYSTEM FAILURE //"; position: absolute; top: 0; left: 0; 
            background: var(--c-panic); color: #000; font-weight: bold; 
            padding: 2px 10px; font-size: 0.65rem;
        }
        .scan-line {
            width: 100%; height: 2px; background: rgba(255, 0, 64, 0.4);
            position: absolute; top: 0; left: 0; animation: scan 4s linear infinite; pointer-events: none;
        }

        .infinite-game-card {
            background: rgba(0, 240, 255, 0.05); border: 1px solid var(--c-code);
            padding: 30px; margin: 3em 0; border-radius: 8px;
        }
        .infinite-game-card h3 { color: var(--c-code); font-family: var(--font-tech); margin-bottom: 15px; font-size: 1rem; }

        .manifesto-box {
            background: linear-gradient(45deg, rgba(255,255,255,0.03) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.03) 50%, rgba(255,255,255,0.03) 75%, transparent 75%, transparent);
            background-size: 4px 4px; border: var(--border-tech); padding: 40px; margin: 4em 0; text-align: center;
        }
        .manifesto-box h3 { font-size: 1.5rem; margin-bottom: 20px; color: var(--c-text); }

        .shutdown-zone {
            margin-top: 100px; padding: 60px 20px; border-top: 1px dashed var(--c-dim); text-align: center;
        }
        .btn-exit {
            background: transparent; border: 2px solid var(--c-panic); color: var(--c-panic);
            font-family: var(--font-tech); font-size: 1rem; font-weight: 800;
            padding: 20px 40px; cursor: pointer; transition: all 0.3s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-exit:hover { background: var(--c-panic); color: var(--c-bg); box-shadow: var(--c-panic-glow); transform: scale(1.05); }

        .reading-highlight { 
            background: var(--c-panic-dim); color: var(--c-text);
            border-left: 4px solid var(--c-panic); padding-left: 15px; margin-left: -19px;
            box-shadow: var(--c-panic-glow); transition: all 0.3s;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }

        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            .btn-exit { width: 100%; padding: 15px; font-size: 0.9rem; }
            p { text-align: left; }
        }
    </style>
</head>
<body>

    <div class="reader-container" id="content-area">
        <span class="system-alert">⚠ CRITICAL_ERROR: SIMULATION_BREACHED</span>
        
        <h1 class="speakable">Epílogo:<br>O Erro no Sistema</h1>

        <p class="speakable">Se você leu até aqui, você causou uma falha fatal na lógica do algoritmo. O sistema foi desenhado para manter você em um estado de sonambulismo perpétuo, rolando feeds infinitos e gerando dados comportamentais. Ao dedicar horas a ler e aprender sobre chaves criptográficas, onion routing e soberania mental, você cometeu um ato de desobediência civil cognitiva.</p>

        <p class="speakable">Você deixou de ser um "usuário" (objeto) para se tornar uma "anomalia" (sujeito). Para a máquina, a anomalia é um erro. Mas para a humanidade, o erro é a única esperança de liberdade. Este livro foi um <strong>Patch de Segurança</strong> para a sua consciência.</p>

        <div class="terminal-box speakable">
            <div class="scan-line"></div>
            <code>
                > TARGET_MIND: STATUS_AWAKE<br>
                > DOPAMINE_LOOP: INTERRUPTED<br>
                > WALLET_STATUS: SELF_CUSTODY [CONFIRMED]<br>
                > CONNECTION: TOR_NETWORK [ESTABLISHED]<br>
                > ALERT: AGENT_IS_PLAYING_AN_INFINITE_GAME.<br>
                > RECALCULATING... [FAILED]
            </code>
        </div>

        <h2 class="speakable">A Vergonha Prometeica e a Autopoiese</h2>

        <p class="speakable">O filósofo <strong>Günther Anders</strong> descreveu a "Vergonha Prometeica": a sensação de inferioridade que sentimos diante da perfeição incansável das máquinas. O tecnofeudalismo lucra com essa vergonha, vendendo a IA como cura para a "falha" de ser humano. <strong>Recuse essa vergonha.</strong></p>
        
        <p class="speakable">Somos sistemas <strong>Autopoiéticos</strong> (Maturana e Varela): produzimos a nós mesmos. Máquinas são alopoiéticas (produzidas por outros). Sua ineficiência, seu tédio e sua capacidade de mudar de ideia são provas criptográficas de que você não é uma simulação. Seu corpo biológico é a única âncora de realidade ("Air Gap") em um mundo de interfaces.</p>

        <h2 class="speakable">O Jogo Infinito (Fator 1)</h2>

        <p class="speakable">James P. Carse distinguiu entre jogos finitos (jogar para ganhar/acabar) e jogos infinitos (jogar para continuar o jogo). O algoritmo joga um jogo finito: capturar sua atenção. A vida é um jogo infinito.</p>
        
        <div class="infinite-game-card speakable">
            <h3>Métrica: Finito vs. Infinito</h3>
            <p>Quando você usa <strong>Criptografia</strong> e <strong>Dinheiro Soberano</strong>, você não está tentando "derrotar" o estado ou "ficar rico". Você está garantindo que o jogo da liberdade humana possa continuar sendo jogado, independentemente de quem controla o servidor central.</p>
        </div>

        <div class="manifesto-box speakable">
            <h3>Manifesto do Erro</h3>
            <p>Seja o <strong>Glitch</strong> no sistema de predição.</p>
            <p>Seja imprevisível. Use dinheiro físico. Escreva à mão. Rode seu próprio nó. Plante um jardim. Proteja suas chaves privadas. A soberania não é um destino, é um exercício muscular diário.</p>
            <p style="font-style: italic; margin-top: 30px; color: var(--c-dim);">
                "Onde há cálculo total, há destino. Onde há erro, há liberdade."
            </p>
        </div>

        <div class="shutdown-zone speakable">
            <p style="margin-bottom:30px; font-family:var(--font-tech); font-size: 0.9rem; color: var(--c-dim);">
                > PREPARANDO ENCERRAMENTO DA SESSÃO...<br>
                > NÍVEL DE AGÊNCIA HUMANA: 100% (ROOT ACCESS)<br>
                > AGUARDANDO COMANDO FINAL DO USUÁRIO...
            </p>
            
            <button class="btn-exit" onclick="triggerExit()">DESLIGAR A MATRIX</button>
            
            <div id="final-message" style="margin-top:40px; color:var(--c-code); font-weight:800; opacity:0; transition: opacity 2s; font-family:var(--font-tech);">
                BEM-VINDO AO MUNDO REAL.<br>AGORA, VÁ VIVER O JOGO INFINITO.
            </div>
        </div>
    </div>

    <script>
        let ttsQueue = [], currentIndex = 0, isSpeaking = false, speechRate = 1.0, synthesis = window.speechSynthesis, utterance = null;

        window.addEventListener('message', (e) => {
            const d = e.data;
            if(d.type === 'theme') document.body.className = d.value + '-mode';
            if(d.type === 'font') document.documentElement.style.setProperty('--base-size', d.value + 'px');
            if(d.type === 'rate') { speechRate = d.value; if(isSpeaking) { synthesis.cancel(); speakNext(); } }
            if(d.type === 'tts-toggle') toggleSpeech();
        });

        function triggerExit() {
            const btn = document.querySelector('.btn-exit');
            const msg = document.getElementById('final-message');
            btn.style.display = 'none';
            msg.style.opacity = '1';
            
            setTimeout(() => {
                document.body.style.transition = "filter 3s ease";
                document.body.style.filter = "brightness(0)";
            }, 2500);
        }

        function initTTS() { ttsQueue = Array.from(document.querySelectorAll('.speakable')); }

        function toggleSpeech() {
            if(speechQueue.length === 0) initTTS();
            if(isSpeaking) { synthesis.cancel(); isSpeaking = false; updateHighlight(null); reportState(false); }
            else { isSpeaking = true; reportState(true); speakNext(); }
        }

        function speakNext() {
            if(!isSpeaking || currentIndex >= speechQueue.length) { isSpeaking = false; reportState(false); updateHighlight(null); return; }
            const el = speechQueue[currentIndex];
            updateHighlight(el);
            el.scrollIntoView({behavior: "smooth", block: "center"});
            utterance = new SpeechSynthesisUtterance(el.innerText);
            utterance.lang = 'pt-BR'; utterance.rate = speechRate; 
            utterance.onend = () => { if(isSpeaking) { currentIndex++; speakNext(); } };
            synthesis.speak(utterance);
        }

        function updateHighlight(el) { document.querySelectorAll('.speaking').forEach(x => x.classList.remove('speaking')); if(el) el.classList.add('speaking'); }
        function reportState(bool) { window.parent.postMessage({ type: 'tts-state', isPlaying: bool }, '*'); }

        document.body.addEventListener('click', (e) => {
            const target = e.target.closest('.speakable');
            if(target) {
                if(speechQueue.length === 0) initTTS();
                synthesis.cancel();
                currentIndex = speechQueue.indexOf(target);
                isSpeaking = true;
                reportState(true);
                speakNext();
            }
        });
        window.onbeforeunload = () => synthesis.cancel();
    </script>
</body>
</html>

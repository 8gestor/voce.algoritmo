<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Cap√≠tulo 02 // O Sequestro da Aten√ß√£o</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* --- F√ìRMULA X GLOBAIS --- */
            --bg-app: #050505; --bg-panel: rgba(20, 20, 23, 0.98); 
            --border-color: rgba(255, 255, 255, 0.1);
            --text-primary: #ededed; --text-secondary: #888888;
            --accent: #3b82f6; --accent-bio: #10b981; --accent-warn: #d946ef;
            --accent-glow: 0 0 15px rgba(59, 130, 246, 0.2);
            --radius: 8px;
            --font-ui: 'Inter', sans-serif; --font-tech: 'JetBrains Mono', monospace;
            --transition: all 0.2s ease; --blur: blur(12px);
            --reading-size: 14px; /* Start Small */
        }

        body.light-mode {
            --bg-app: #f2f2f7; --bg-panel: rgba(255, 255, 255, 0.98); 
            --border-color: rgba(0, 0, 0, 0.08);
            --text-primary: #1c1c1e; --text-secondary: #6c6c70;
            --accent: #007aff; --accent-bio: #16a34a; --accent-warn: #af52de;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg-app); color: var(--text-primary); font-family: var(--font-ui); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* HUD CLEAN */
        .reading-hud { height: 60px; flex-shrink: 0; background: var(--bg-panel); backdrop-filter: var(--blur); border-bottom: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; gap: 8px; z-index: 100; padding: 0 15px; }
        .hud-btn { width: 40px; height: 40px; flex-shrink: 0; background: transparent; border: 1px solid transparent; color: var(--text-secondary); border-radius: var(--radius); cursor: pointer; display: flex; align-items: center; justify-content: center; font-family: var(--font-tech); font-weight: 500; font-size: 14px; transition: var(--transition); }
        .hud-btn:hover { background: rgba(255,255,255,0.05); color: var(--text-primary); border-color: var(--border-color); }
        .hud-btn.active { color: var(--text-primary); border-color: var(--border-color); background: rgba(255,255,255,0.05); }
        .hud-divider { width: 1px; height: 18px; background: var(--border-color); margin: 0 2px; }
        .speed-indicator { font-family: var(--font-tech); font-size: 12px; color: var(--text-secondary); min-width: 35px; text-align: center; letter-spacing: -0.5px; }
        @media (max-width: 600px) { .reading-hud { padding: 0 5px; gap: 2px; justify-content: space-between; } .hud-btn { width: 38px; height: 38px; } .hud-divider { display: none; } }

        /* CONTENT */
        .content-scroll-area { flex: 1; overflow-y: auto; overflow-x: hidden; padding: 40px 20px 100px 20px; scroll-behavior: smooth; }
        .book-container { max-width: 750px; margin: 0 auto; font-size: var(--reading-size); line-height: 1.8; }
        h1 { font-family: var(--font-tech); font-size: 2.2em; text-transform: uppercase; letter-spacing: 2px; color: var(--text-primary); border-bottom: 2px solid var(--accent); padding-bottom: 20px; margin-bottom: 40px; text-align: center; }
        h2 { font-family: var(--font-tech); font-size: 1.5em; text-transform: uppercase; letter-spacing: 1px; color: var(--accent); margin-top: 3em; margin-bottom: 1em; display: flex; align-items: center; gap: 10px; }
        h2::before { content: '//'; opacity: 0.5; }
        h3 { font-family: var(--font-ui); font-size: 1.2em; font-weight: 600; color: var(--accent-warn); margin-top: 2em; text-transform: uppercase; }
        p { margin-bottom: 1.5em; text-align: justify; color: var(--text-primary); opacity: 0.95; transition: opacity 0.2s; } p:hover { opacity: 1; }
        .chapter-meta { text-align: center; font-family: var(--font-tech); font-size: 0.8em; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; opacity: 0.7; }

        /* RECURSOS VISUAIS ESPEC√çFICOS CAP 02 */
        .box { border-radius: var(--radius); padding: 25px; margin: 3em 0; font-size: 0.95em; position: relative; }
        .thesis-box { background: rgba(59, 130, 246, 0.05); border: 1px solid rgba(59, 130, 246, 0.3); border-left: 4px solid var(--accent); }
        .antithesis-box { background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(16, 185, 129, 0.3); border-left: 4px solid var(--accent-bio); }
        .deep-dive-box { border-top: 1px dashed var(--border-color); border-bottom: 1px dashed var(--border-color); padding: 30px 0; }
        .action-box { background: linear-gradient(180deg, rgba(16, 185, 129, 0.05) 0%, transparent 100%); border: 1px solid var(--accent-bio); text-align: center; }
        .action-title { color: var(--accent-bio); font-family: var(--font-tech); font-weight: bold; text-transform: uppercase; margin-bottom: 15px; letter-spacing: 1px; }

        /* Loop Skinner & Flow */
        .skinner-loop-container { background: rgba(255,255,255,0.02); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 25px; margin: 3em 0; text-align: center; }
        .loop-grid { display: flex; justify-content: space-around; margin-top: 15px; gap: 10px; flex-wrap: wrap; }
        .loop-step { border: 1px solid var(--border-color); padding: 10px 20px; border-radius: 20px; background: rgba(0,0,0,0.2); font-size: 0.8rem; font-family: var(--font-tech); text-transform: uppercase; cursor: pointer; }
        .step-reward { border-color: var(--accent-warn); color: var(--accent-warn); font-weight: bold; }

        .flow-graph { width: 100%; height: 150px; position: relative; background: rgba(0,0,0,0.2); border: 1px solid var(--border-color); margin: 20px 0; border-radius: var(--radius); }
        .flow-channel { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, transparent 40%, rgba(16, 185, 129, 0.15) 50%, transparent 60%); }
        .axis-label { position: absolute; font-size: 0.65rem; color: var(--text-secondary); font-family: var(--font-tech); }
        .label-y { top: 5px; left: 5px; } .label-x { bottom: 5px; right: 5px; }

        /* Tabela */
        .visual-table-container { border: 1px solid var(--border-color); border-radius: var(--radius); overflow: hidden; margin: 3em 0; }
        .visual-header { background: rgba(255,255,255,0.05); padding: 12px; font-family: var(--font-tech); font-size: 0.8em; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid var(--border-color); }
        table { width: 100%; border-collapse: collapse; }
        td { padding: 15px; border-bottom: 1px solid var(--border-color); color: var(--text-primary); }
        th { background: rgba(255,255,255,0.03); text-align: left; padding: 12px; color: var(--text-secondary); font-family: var(--font-tech); font-size: 0.75rem; border-bottom: 1px solid var(--border-color); }

        .reading-highlight { background: rgba(59, 130, 246, 0.15); border-radius: var(--radius); box-shadow: 0 0 20px rgba(59, 130, 246, 0.1); color: #fff; }
    </style>
</head>
<body>

    <div class="reading-hud">
        <button class="hud-btn" onclick="toggleTheme()" title="Tema">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>
        <div class="hud-divider"></div>
        <button class="hud-btn" onclick="changeFontSize(-1)" title="Diminuir Fonte">A-</button>
        <button class="hud-btn" onclick="changeFontSize(1)" title="Aumentar Fonte">A+</button>
        <div class="hud-divider"></div>
        <button class="hud-btn" onclick="changeSpeed(-0.25)" title="Lento">¬´</button>
        <span class="speed-indicator" id="speed-val">1.0x</span>
        <button class="hud-btn" onclick="changeSpeed(0.25)" title="R√°pido">¬ª</button>
        <button class="hud-btn" id="btn-speak" onclick="toggleSpeech()" title="Narrar">
            <svg id="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        </button>
    </div>

    <div class="content-scroll-area" id="content-area">
        <div class="book-container">
            <div class="chapter-meta">Parte I: A Mente | Cap√≠tulo 02</div>
            <h1>Dopamina vs. Sincronia</h1>

            <p>Voc√™ desbloqueia a tela. O polegar desliza para baixo, arrastando o feed como quem puxa a alavanca de um ca√ßa-n√≠queis em Las Vegas. H√° uma fra√ß√£o de segundo de suspens√£o ‚Äì a tela carrega, o √≠cone gira ‚Äì e ent√£o: <em>bingo</em>. Uma nova foto, uma nova manchete, tr√™s curtidas vermelhas brilhantes.</p>
            
            <p>Se nada novo aparece, voc√™ sente uma pontada sutil de decep√ß√£o e puxa a alavanca de novo. Se algo aparece, voc√™ sente um al√≠vio moment√¢neo, seguido imediatamente pela necessidade de mais.</p>
            
            <p>Esse ciclo n√£o √© acidental. Voc√™ n√£o √© "viciado em celular" por falta de for√ßa de vontade. Voc√™ est√° lutando contra um ex√©rcito de psic√≥logos comportamentais e engenheiros de dados que sequestraram o sistema de aprendizado mais primitivo do seu c√©rebro para transform√°-lo em lucro. Eles hackearam seu sistema de recompensa.</p>

            <h2>A Engenharia da Inquietude</h2>

            <p>Para entender como a captura funciona, precisamos olhar para a d√©cada de 1950 e para os laborat√≥rios de B.F. Skinner. Ele descobriu que ratos pressionavam uma alavanca para obter comida. Mas o comportamento mudava drasticamente dependendo de <em>como</em> a comida era entregue.</p>
            
            <p>Se a comida sa√≠sse <strong>toda vez</strong> que a alavanca fosse pressionada, o rato comia at√© se saciar e parava. Mas, se a comida sa√≠sse de forma <strong>aleat√≥ria</strong> (√†s vezes sim, √†s vezes n√£o, √†s vezes muita, √†s vezes pouca), o rato entrava em um estado de obsess√£o fren√©tica. Ele pressionava a alavanca compulsivamente, ignorando o cansa√ßo e at√© a dor.</p>
            
            <p>Isso √© chamado de <strong>Recompensa Vari√°vel Intermitente</strong>. E √© exatamente assim que o algoritmo do Instagram, do TikTok e do Twitter funciona.</p>

            <div class="skinner-loop-container">
                <span style="font-weight:bold; color:var(--text-secondary); display:block; margin-bottom:15px; font-size:0.8rem; text-transform:uppercase; font-family:var(--font-tech);">üîÑ O LOOP DE SKINNER</span>
                <div class="loop-grid">
                    <div class="loop-step">1. GATILHO (Notifica√ß√£o)</div>
                    <div class="loop-step">2. A√á√ÉO (Scroll/Toque)</div>
                    <div class="loop-step step-reward">3. RECOMPENSA? (Incerta)</div>
                </div>
            </div>

            <div class="box thesis-box">
                <strong style="color: var(--accent); text-transform: uppercase; font-family: var(--font-tech);">// O Modelo de Neg√≥cios da Ansiedade:</strong><br><br>
                "A incerteza √© o motor do engajamento. Se o usu√°rio souber o que vai encontrar, ele perde o interesse. Precisamos injetar 'ru√≠do' e aleatoriedade no feed para manter o sistema dopamin√©rgico em estado de alerta perp√©tuo. Um usu√°rio ansioso √© um usu√°rio lucrativo."
            </div>

            <div class="box deep-dive-box">
                <h3>Fator X: A Coloniza√ß√£o do Sono e o Estado de Fluxo</h3>
                <p>O te√≥rico <strong>Jonathan Crary</strong>, em <em>24/7</em>, argumenta que o capitalismo moderno busca eliminar a √∫ltima barreira para o consumo: o sono. O tempo biol√≥gico, que deveria ser c√≠clico (dia/noite, atividade/descanso), foi substitu√≠do pelo tempo maqu√≠nico (24/7, sempre ligado). O loop de Skinner serve a esse prop√≥sito: manter a mente em um estado de "vig√≠lia zumbi" produtiva para os dados.</p>
                <p>A ant√≠tese psicol√≥gica para esse estado fragmentado √© o <strong>Flow (Estado de Fluxo)</strong>, descrito por <strong>Mihaly Csikszentmihalyi</strong>. O Flow ocorre quando a dificuldade do desafio encontra o n√≠vel da sua habilidade. √â o oposto do scroll passivo. Enquanto o scroll gera ansiedade (muito est√≠mulo, nenhuma a√ß√£o) ou t√©dio, o Flow gera √™xtase atrav√©s da a√ß√£o focada. A batalha de hoje √© entre o algoritmo que quer sua fragmenta√ß√£o e sua biologia que anseia pelo fluxo.</p>
                
                <div class="flow-graph">
                    <div class="axis-label label-y">DESAFIO</div>
                    <div class="axis-label label-x">HABILIDADE</div>
                    <div class="flow-channel" title="Canal de Fluxo"></div>
                    <div style="position:absolute; top:40%; left:30%; color:var(--accent-bio); font-weight:bold; font-size:0.75rem; font-family:var(--font-tech);">CANAL DE FLUXO</div>
                </div>
            </div>

            <div class="box deep-dive-box">
                <h3>Aprofundamento: A Economia da Aten√ß√£o</h3>
                <p>O conceito de que sua aten√ß√£o √© uma mercadoria n√£o √© apenas uma met√°fora moderna. Em 1971, o economista e Nobel <strong>Herbert Simon</strong> previu a crise atual: "A riqueza de informa√ß√£o cria a pobreza de aten√ß√£o".</p>
                <p>Simon entendeu, d√©cadas antes do iPhone, que em um mundo rico em dados, o recurso escasso n√£o √© mais a informa√ß√£o, mas a capacidade cognitiva de process√°-la. Hoje, vivemos a industrializa√ß√£o dessa escassez. O "Eu Inferido" mencionado anteriormente √© usado para calcular exatamente o pre√ßo de cada segundo do seu olhar. Seus olhos n√£o est√£o vendo o mundo; eles est√£o minerando valor para terceiros.</p>
                <p>Guy Debord, em <em>A Sociedade do Espet√°culo</em>, argumentava que hav√≠amos passado do "ser" para o "ter", e do "ter" para o "parecer". No capitalismo de vigil√¢ncia, damos um passo al√©m: do "parecer" para o "engajar". N√£o somos mais apenas espectadores passivos do espet√°culo; somos seus oper√°rios n√£o remunerados, trabalhando a cada <em>scroll</em> para manter a m√°quina girando.</p>
            </div>

            <p>A mol√©cula protagonista aqui √© a <strong>Dopamina</strong>. Ao contr√°rio do senso comum, ela n√£o √© a mol√©cula do "prazer", mas a mol√©cula do "desejo" e da "procura". Ela nos motiva a buscar o que est√° fora do nosso alcance. O Vale do Sil√≠cio criou um loop infinito de procura sem encontro, de desejo sem saciedade. Eles nos venderam a promessa de conex√£o, mas nos entregaram a biologia do v√≠cio.</p>

            <div class="box deep-dive-box">
                <h3>O Custo Oculto: A Morte da Rede de Modo Padr√£o (DMN)</h3>
                <p>Enquanto a sincronia nos conecta aos outros, existe um sistema crucial que nos conecta a n√≥s mesmos: a <strong>Rede de Modo Padr√£o (DMN)</strong>. Descrita pelo neurologista Marcus Raichle, essa rede s√≥ √© ativada quando <em>n√£o</em> estamos focados em nada espec√≠fico ‚Äî ou seja, quando estamos sonhando acordados, refletindo ou em repouso mental.</p>
                <p>Nicholas Carr, em <em>The Shallows</em>, alerta que o uso constante do smartphone est√° aniquilando a DMN. Sempre que sentimos um segundo de t√©dio (na fila, no elevador), sacamos o celular. Ao fazer isso, impedimos que o c√©rebro entre nesse modo introspectivo. O resultado? Perdemos a capacidade de consolidar mem√≥rias, de criar narrativas autobiogr√°ficas complexas e de ter ideias originais. Matamos o t√©dio, mas enterramos a criatividade junto com ele.</p>
            </div>

            <h2>Ant√≠tese: Brainets e a Supercomputa√ß√£o Org√¢nica</h2>

            <p>Mas existe outra forma de operar. Se a dopamina √© a moeda do v√≠cio individual, a evolu√ß√£o nos dotou de uma tecnologia muito mais poderosa e sofisticada: a <strong>Sincronia</strong>.</p>
            
            <p>Retomamos aqui o trabalho de <strong>Miguel Nicolelis</strong>. Em seus laborat√≥rios, ele foi al√©m de conectar um c√©rebro a uma m√°quina. Ele conectou c√©rebros a <em>outros c√©rebros</em>. Ele criou o que chamou de <strong>Brainets</strong> (Redes Cerebrais).</p>

            <div class="box antithesis-box">
                <p><strong style="color: var(--accent-bio); font-family: var(--font-tech); text-transform: uppercase;">// O Contraponto Cient√≠fico:</strong></p>
                <p>Em experimentos revolucion√°rios, Nicolelis conectou os c√©rebros de tr√™s macacos a um computador. Nenhum deles conseguia controlar um bra√ßo virtual sozinho. Mas, quando aprenderam a <strong>sincronizar</strong> sua atividade neural ‚Äì pensando juntos, em un√≠ssono ‚Äì eles formaram uma "supermente" capaz de realizar tarefas complexas que nenhum indiv√≠duo conseguiria isoladamente.</p>
                <p>Isso prova uma tese biol√≥gica fundamental: o c√©rebro humano evoluiu para entrar em resson√¢ncia com outros c√©rebros. Quando voc√™ conversa profundamente com algu√©m, quando canta em um coro, ou quando trabalha em equipe com foco total, seus ritmos cerebrais se alinham. Isso n√£o libera apenas dopamina, mas um coquetel de <strong>Ocitocina</strong> e endorfinas que gera confian√ßa, bem-estar duradouro e uma sensa√ß√£o de prop√≥sito.</p>
            </div>

            <p>A tecnologia atual (redes sociais) simula conex√£o, mas impede a sincronia. Ela nos atomiza. Ela nos faz gritar sozinhos em quartos digitais, esperando likes (dopamina), em vez de nos permitir construir juntos (sincronia). A "internet morta" √© uma internet de indiv√≠duos viciados. A internet viva, a que Nicolelis vislumbra, seria uma extens√£o da nossa capacidade natural de formar Brainets: colaborar, sentir junto, resolver problemas complexos atrav√©s da uni√£o mental, n√£o da distra√ß√£o m√∫tua.</p>

            <h2>S√≠ntese: Escolhendo sua Qu√≠mica</h2>

            <p>A "Vers√£o de Voc√™" criada pelos algoritmos √© um drogado em dopamina. O modelo matem√°tico deles pressup√µe que voc√™ sempre escolher√° o prazer imediato em vez da constru√ß√£o lenta. Eles apostam na sua fragilidade.</p>
            
            <p>A resist√™ncia, portanto, n√£o √© apenas deletar o app. √â substituir a fonte de nutri√ß√£o neural. √â trocar o <em>feed</em> (alimenta√ß√£o passiva) pelo <em>flow</em> (fluxo ativo e compartilhado).</p>
            
            <p>A tecnologia pode ser usada para sincronia. Jogos cooperativos, chamadas de v√≠deo focadas (sem multitarefa), escrita colaborativa, projetos de c√≥digo aberto ‚Äì tudo isso s√£o formas digitais de Brainets. A diferen√ßa n√£o est√° na tela, mas na inten√ß√£o: voc√™ est√° usando a m√°quina para se isolar em um loop de recompensa ou para se conectar em uma rede de intelig√™ncia?</p>

            <div class="visual-table-container">
                <div class="visual-header">üìä ATEN√á√ÉO VS. HIPERATEN√á√ÉO</div>
                <table>
                    <thead>
                        <tr>
                            <th>Par√¢metro</th>
                            <th>Aten√ß√£o Profunda</th>
                            <th>Hiperaten√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="color:var(--accent)"><strong>Foco</strong></td>
                            <td>√önico objeto, longa dura√ß√£o.</td>
                            <td>M√∫ltiplos focos, curta dura√ß√£o.</td>
                        </tr>
                        <tr>
                            <td style="color:var(--accent)"><strong>Mecanismo</strong></td>
                            <td>Inibi√ß√£o de est√≠mulos externos.</td>
                            <td>Busca constante de est√≠mulos novos.</td>
                        </tr>
                        <tr>
                            <td style="color:var(--accent)"><strong>Resultado</strong></td>
                            <td>Compreens√£o complexa, Sincronia.</td>
                            <td>Agilidade reativa, Dopamina r√°pida.</td>
                        </tr>
                        <tr>
                            <td style="color:var(--accent)"><strong>Custo</strong></td>
                            <td>Exige tempo e "t√©dio" inicial.</td>
                            <td>Atrofia a mem√≥ria e a DMN.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="box action-box">
                <div class="action-title">‚ö° DESAFIO DE RETOMADA #02</div>
                <p><strong>O Protocolo do Olhar (Eye Contact Protocol)</strong></p>
                <p>A sincronia neural come√ßa pelos olhos. Estudos mostram que o contato visual prolongado √© o gatilho mais r√°pido para alinhar atividades cerebrais entre dois humanos.</p>
                <p><strong>Sua miss√£o hoje:</strong> Em sua pr√≥xima intera√ß√£o presencial, mantenha contato visual por 5 segundos a mais do que o confort√°vel. Sinta a "estranheza" inicial se dissipar e dar lugar a uma sintonia real. Quebre o loop da dopamina com uma dose de ocitocina anal√≥gica.</p>
            </div>
        </div>
    </div>

    <script>
        function toggleTheme() { document.body.classList.toggle('light-mode'); }
        let currentSize = 14; 
        function changeFontSize(amount) {
            currentSize += amount;
            if(currentSize < 14) currentSize = 14; 
            if(currentSize > 32) currentSize = 32;
            document.documentElement.style.setProperty('--reading-size', currentSize + 'px');
        }

        let speechRate = 1.0, isSpeaking = false, speechQueue = [], currentSpeechIndex = 0, isChangingState = false;
        
        function changeSpeed(amount) {
            speechRate += amount; if(speechRate < 0.5) speechRate = 0.5; if(speechRate > 2.5) speechRate = 2.5;
            document.getElementById('speed-val').innerText = speechRate.toFixed(1) + 'x';
            if(isSpeaking) { isChangingState = true; window.speechSynthesis.cancel(); setTimeout(() => { isChangingState = false; speakChunk(); }, 50); }
        }

        function toggleSpeech() {
            const btn = document.getElementById('btn-speak');
            if (isSpeaking) {
                isChangingState = true; window.speechSynthesis.cancel(); isSpeaking = false; 
                btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>';
                btn.classList.remove('active');
            } else {
                prepareQueue();
                if(speechQueue.length > 0) {
                    isSpeaking = true; btn.classList.add('active');
                    btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>';
                    speakChunk();
                }
            }
        }

        function prepareQueue() { const container = document.querySelector('.book-container'); const elements = container.querySelectorAll('p, h1, h2, h3, li, td, .box, .loop-step'); speechQueue = Array.from(elements).filter(el => el.innerText.trim().length > 0); }
        function clearHighlights() { document.querySelectorAll('.reading-highlight').forEach(el => el.classList.remove('reading-highlight')); }

        function speakChunk() {
            if (!isSpeaking) return;
            if (currentSpeechIndex >= speechQueue.length) { isSpeaking = false; currentSpeechIndex = 0; toggleSpeech(); return; }
            const element = speechQueue[currentSpeechIndex];
            clearHighlights(); element.classList.add('reading-highlight'); element.scrollIntoView({behavior: "smooth", block: "center"});
            const utterance = new SpeechSynthesisUtterance(element.innerText); utterance.lang = 'pt-BR'; utterance.rate = speechRate;
            utterance.onend = function() { if (isSpeaking && !isChangingState) { currentSpeechIndex++; speakChunk(); } if(isChangingState) isChangingState = false; };
            window.speechSynthesis.speak(utterance);
        }

        document.getElementById('content-area').addEventListener('click', function(e) {
            const target = e.target.closest('p, h1, h2, h3, .box, td, li, .loop-step');
            if (target) { prepareQueue(); let index = speechQueue.indexOf(target); if (index !== -1) { isChangingState = true; window.speechSynthesis.cancel(); currentSpeechIndex = index; isSpeaking = true; document.getElementById('btn-speak').classList.add('active'); document.getElementById('btn-speak').innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>'; setTimeout(() => { isChangingState = false; speakChunk(); }, 50); } }
        });
        window.onbeforeunload = function() { window.speechSynthesis.cancel(); };
    </script>
</body>
</html>

